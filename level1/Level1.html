<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script src="jquery.rwdImageMaps.min.js"></script>
    <script src="jquery.rwdImageMaps.js"></script>
    <style>
       
        img[usemap] {
            border: none;
            height: auto;
            width: 100%;
            /* width: auto; */
        }
    
    </style>
    <script>
         $(document).ready(function (e) {            
            $('img[usemap]').rwdImageMaps();
            $('area').on('click', function () {               
                $('img[usemap]').rwdImageMaps();
               
            });
        });
        localStorage.setItem('saved_countdown',new Date().getTime() + (1200 + 2) * 1000)
       // document.getElementById("demo").innerHTML = "";
        /* level 3 keys --remove */
        localStorage.removeItem('keyDoor');
        localStorage.removeItem('keyMachine');
        localStorage.removeItem('keyOven');
        localStorage.removeItem('keyDrawer');
        localStorage.removeItem('saved_countdown');
  
        var keyFlag = "false";
        var paperFlag = "false"
        var compPwd = "false"
        var keydoor = "false"
        function showMainPage() {
            $('img[usemap]').rwdImageMaps();
            $("#Section2").hide();
            $("#Section3").hide();
            $("#Section1").show();
            $("#Section4").hide();
            $("#Section5").hide();
            $("#Section6").hide();
            $("#Section7").hide();
            $("#Section8").hide();
            $("#Section9").hide();
            $("#Section10").hide();
            $("#Section11").hide(); 
            $("#Section12").hide();

        }
        function OpenDoor() {
            $("#Section2").hide();
            $("#Section3").hide();
            $("#Section1").hide();
            $("#Section4").hide();
            $("#Section5").hide();
            $("#Section6").hide();
            $("#Section7").hide();
            $("#Section8").hide();
            $("#Section9").hide();
            $("#Section10").hide();
            $("#Section11").hide();  
            $("#Section13").hide();         
            $("#Section12").show();
            setTimeout(function () { $('#lvlclearmodal').modal('show'); }, 500)

        }
        
        function openDiv1() {     
            $('img[usemap]').rwdImageMaps();      
            keyFlag = "true"
            $('#Section2').show();
            $('#Section1').hide();
        }

        function openDiv2() {   
            $('img[usemap]').rwdImageMaps();
            if(paperFlag == "true")
            {
                $('#Section3').show(); 
            }
            else{
            $('#Section5').show(); 
            
        }     
        $('#Section1').hide();  
        }
        function openDiv3() {  
            $('img[usemap]').rwdImageMaps(); 
            if(keyFlag == "true")
            {
                $('#Section7').show();
                $('#Section1').hide();
                $('#Section3').hide(); 
                $('#Section2').hide(); 
                $('#Section5').hide();
                $('#Section4').hide();
                $('#Section6').hide();  
                $('#Section8').hide();      
                paperFlag="true"        
            } 
            else{
                $('#Section7').hide();
                $('#Section1').hide();
                $('#Section3').hide(); 
                $('#Section2').hide(); 
                $('#Section5').hide();
                $('#Section4').hide();
                $('#Section6').show();
            } 

            if(paperFlag == "true")
            {
                $('img[usemap]').rwdImageMaps(); 
                $('#Section8').show();
                $('#Section7').show();
                $('#Section1').hide();
                $('#Section3').hide(); 
                $('#Section2').hide(); 
                $('#Section5').hide();
                $('#Section4').hide();
                $('#Section6').hide();
            }
            
        }
        function checkPwd()
        {
            $('img[usemap]').rwdImageMaps();
            if (txtpwd.value == "TAKI") {
                $('#Section4').show();
                $('#Section1').hide();
                $('#Section3').hide(); 
                $('#Section2').hide(); 
                $('#Section5').hide();
                compPwd = "true"
            }
            else {
                $('#Section5').show();
                $('#Section1').hide();
                $('#Section4').hide();
                $('#Section3').hide(); 
                $('#Section2').hide();
                
            }
        }

        function openDiv4()
        {
            $('img[usemap]').rwdImageMaps();
            if(compPwd == "true")
            {
                $('#Section9').show();                
                $('#Section4').hide();
                $('#Section3').hide(); 
                $('#Section2').hide();
                $('#Section1').hide();
                $('#Section5').hide();
                $('#Section6').hide(); 
                $('#Section7').hide();
                $('#Section8').hide();
            }
            else{
                $('#Section10').show();
                $('#Section9').hide();
                $('#Section4').hide();
                $('#Section3').hide(); 
                $('#Section2').hide();
                $('#Section1').hide();
                $('#Section5').hide();
                $('#Section6').hide(); 
                $('#Section7').hide();
                $('#Section8').hide();
            }
        }
        function openDiv5()
        {
            $('img[usemap]').rwdImageMaps();
            
            if(keydoor == "true")
            {
                OpenDoor();
            }
            else{
                $('#Section11').show();
                $('#Section9').hide();
                $('#Section4').hide();
                $('#Section3').hide(); 
                $('#Section2').hide();
                $('#Section1').hide();
                $('#Section5').hide();
                $('#Section6').hide(); 
                $('#Section7').hide();
                $('#Section8').hide();
                $('#Section10').hide();
            }
        }
        function checklockerPwd()
        {
            $('img[usemap]').rwdImageMaps();
            if (txtlockerpwd.value == "1886") {
                $('#Section13').show();
                $('#Section1').hide();
                $('#Section3').hide(); 
                $('#Section2').hide(); 
                $('#Section5').hide();
                $('#Section4').hide();
                $('#Section6').hide();
                $('#Section7').hide();
                $('#Section8').hide(); 
                $('#Section9').hide();
                $('#Section10').hide();
                keydoor = "true"
            }
            else {
                $('#Section10').show();
                $('#Section1').hide();
                $('#Section4').hide();
                $('#Section3').hide(); 
                $('#Section2').hide();
                $('#Section13').hide();
                $('#Section5').hide();
                $('#Section6').hide(); 
                $('#Section7').hide(); 
                $('#Section8').hide();
                $('#Section9').hide();               
                $('#Section11').hide();
               
                
            }
        }
    </script>

</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-4"></div>
            <div class="col-md-6">
                <p id ="demo"></p>
            </div>
            <div class="col-md-2">               
                <b> <label id="lblWelcome">Welcome Guest</label></b>
            </div>
        </div>
        <div id="Section1">
            
            <img src="00Sample.jpg" alt="Nature" usemap="#workmap">
            <map name="workmap">
                <area shape="rect" coords="530,709,729,848" alt="plant" href="#" onclick="openDiv1();" />
                <area shape="rect" coords="309,773,86,687" alt="laptop" href="#" onclick="openDiv2();" />
                <area shape="rect" coords="1410,656,1597,829" alt="drawer" href="#" onclick="openDiv3();" />
                <area shape="rect" coords="1544,409,1781,564" alt="cupboard" href="#" onclick="openDiv4();" />
                <area shape="rect" coords="888,391,1177,826" alt="door" href="#" onclick="openDiv5();" />
            </map>
            <div class="row">
                <div class="col-sm-4"></div>
                <div class="col-sm-6">
                    <p>You are trapped in a mansion . You need to solve some puzzles to escape</p>
                    <ul>
                        <li>
                            <label>Check the computer</label>
                        </li>
                        <li>
                            <label>Check the plant</label>
                        </li>
                        <li>
                            <label>Check the drawer</label>
                        </li>
                        <li>
                            <label>Check the cupboard</label>
                        </li>
                        <li>
                            <label>Check the exit door</label>
                        </li>
                    </ul>                   
                   
                </div>
               
            </div>
        </div>

        

        <div id="Section2" style="display: none;">
            <div>
                <img src="img1_plant.jpg" alt="Nature" usemap="#workmap1">

                <map name="workmap1">
                    <area shape="rect" coords="-1,788,205,920" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section3" style="display: none;">
            <div>
                <img src="02Sample.jpg" alt="Nature" usemap="#workmap2">
                <input type ="text" id ="txtpwd" style="position: absolute;top: 90%; left: 70%; transform: translate(-40%,-40%)">
                <a style="position: absolute;top: 90%; left: 85%; transform: translate(-40%,-40%)" href = "#" onclick="checkPwd();">Check</a>               
                <map name="workmap2">
                    <area shape="rect" coords="58,904,251,1030" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section4" style="display: none;">
            <div>
                <img src="img3_laptop opened.jpg" alt="Nature" usemap="#workmap3">

                <map name="workmap3">
                    <area shape="rect" coords="1,776,179,911" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section5" style="display: none;">
            <div>
                <img src="img3_laptop locked.jpg" alt="Nature" usemap="#workmap4">

                <map name="workmap4">
                    <area shape="rect" coords="-1,780,192,910" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section6" style="display: none;">
            <div>
                <img src="img2_drawer closed.jpg" alt="Nature" usemap="#workmap5">

                <map name="workmap5">
                    <area shape="rect" coords="2,787,185,912" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>
        <div id="Section7" style="display: none;">
            <div>
                <img src="img2_drawer opened.jpg" alt="Nature" usemap="#workmap6">

                <map name="workmap6">
                    <area shape="rect" coords="186,915,1,791" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section8" style="display: none;">
            <div style="position: absolute;top: 90%; left: 90%; transform: translate(-40%,-40%)">
                <img src="img2_drawer paper.jpg" alt="Nature" usemap="#workmap7">

                <map name="workmap7">
                    <area shape="rect" coords="186,189,1862,870" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>
        <div id="Section9" style="display: none;">
            <div >
                <img src="img4_cupboard locker.jpg" alt="Nature" usemap="#workmap8">
                <input type ="text" id ="txtlockerpwd" style="position: absolute;top: 90%; left: 70%; transform: translate(-40%,-40%)">
                <a style="position: absolute;top: 90%; left: 85%; transform: translate(-40%,-40%)" href = "#" onclick="checklockerPwd();">Check</a>               
             
                <map name="workmap8">
                    <area shape="rect" coords="-1,785,185,911" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section10" style="display: none;">
            <div >
                <img src="img4_cupboard closed.jpg" alt="Nature" usemap="#workmap9">

                <map name="workmap9">
                    <area shape="rect" coords="6,786,182,912" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>
        <div id="Section13" style="display: none;">
            <div >
                <img src="img4_cupboard opened.jpg" alt="Nature" usemap="#workmap11">

                <map name="workmap11">
                    <area shape="rect" coords="2,787,179,911" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>
        <div id="Section11" style="display: none;">
            <div >
                <img src="img5_exitdoor closed.jpg" alt="Nature" usemap="#workmap10">

                <map name="workmap10">
                    <area shape="rect" coords="-1,789,190,913" alt="fig2" href="javascript:showMainPage();" />
                </map>
            </div>
        </div>

        <div id="Section12" style="display: none;">
            <div>
                <img src="img5_exitdoor opened_Moment.jpg" alt="Nature" style="width:100%;height :80%">
                <div id="lvlclearmodal" class="modal" tabindex="-1" role="dialog">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-body">
                                <center>
                                    <p><strong>Congratulations...</strong><br>You have cleared level 1</p>
                                    <a href="../level2/Level2.html" class="btn btn-success">Proceed to level 2</a>
                                </center>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var name = localStorage.getItem('name')
            var label_text = $('#lblWelcome').text(); //Get the text            
            document.getElementById('lblWelcome').innerText = "Welcome " + name;
            $('img[usemap]').rwdImageMaps();
            /*Timer logic */
            var time = 1200; // This is the time allowed
            var saved_countdown = localStorage.getItem('saved_countdown');

            if (saved_countdown == null) {
                // Set the time we're counting down to using the time allowed
                var new_countdown = new Date().getTime() + (time + 2) * 1000;

                time = new_countdown;
                localStorage.setItem('saved_countdown', new_countdown);
            } else {
                time = saved_countdown;
            }

            // Update the count down every 1 second
            var x = setInterval(() => {

                // Get today's date and time
                var now = new Date().getTime();

                // Find the distance between now and the allowed time
                var distance = time - now;

                // Time counter
               // var counter = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));

                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                //alert(counter)

                // Output the result in an element with id="demo"
                document.getElementById("demo").innerHTML =  minutes + "m " + seconds + "s ";

                // If the count down is over, write some text 
                if (distance <= 0) {
                    clearInterval(x);
                    localStorage.removeItem('saved_countdown');
                    document.getElementById("demo").innerHTML = "EXPIRED";
                }
            }, 1000);
        </script>


    </div>
</body>

</html>

<body>